<!-- FILE: vehicle.html（全文） -->
<!doctype html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>車両の相談｜drivers-site（山口県）</title>
  <meta name="description" content="車両購入・修理・車検・開業トータル相談。協力ドライバー登録サイト。" />
  <link rel="canonical" href="https://takeshimonoseki.github.io/vehicle.html" />
  <meta property="og:title" content="車両の相談｜drivers-site（山口県）" />
  <meta property="og:url" content="https://takeshimonoseki.github.io/vehicle.html" />
  <meta property="og:type" content="website" />
  <link rel="stylesheet" href="./drivers.css" />
  <script src="./config.js"></script>
  <script src="./drivers.js" defer></script>
</head>

<body>
  <header class="site-header" id="top">
    <div class="site-header-inner">
      <div class="header-left">
        <div class="region-badge" aria-label="対応地域">
          <div class="region-en" id="regionEn">YAMAGUCHI</div>
          <div class="region-ja" id="regionJa">山口県</div>
        </div>

        <div class="brand">
          <div class="brand-mark" aria-hidden="true"><span></span></div>
          <div class="brand-text">
            <div class="brand-title">drivers-site</div>
            <div class="brand-sub">協力ドライバー登録</div>
          </div>
        </div>
      </div>

      <nav class="nav" aria-label="主要ナビ">
        <a class="nav-link nav-link-cta" href="./register.html">登録（最優先）</a>
        <a class="nav-link" href="./index.html">トップ</a>
        <a class="nav-link" href="./consult.html">開業の相談</a>
        <a class="nav-link is-active" href="./vehicle.html">車両の相談</a>
      </nav>

      <div class="header-right">
        <a class="btn btn-secondary" id="headerLineLink" href="#" target="_blank" rel="noopener">LINEで相談</a>
      </div>
    </div>
  </header>

  <main class="container">
    <section class="hero">
      <div class="hero-inner">
        <div class="hero-text">
          <h1 class="hero-title">車両の相談</h1>
          <p class="hero-lead">
            車両購入・リース/レンタル・修理・車検・保険など、車まわりの相談はこちら。
            <br />
            ※登録がまだなら、まずは <a href="./register.html">登録</a> を先に済ませると話が早いです。
          </p>
          <div class="hero-actions">
            <a class="btn btn-primary" href="./register.html">まず登録に進む</a>
            <a class="btn btn-secondary" href="./consult.html">開業の相談へ</a>
          </div>
        </div>
      </div>
    </section>

    <!-- 1) 車両購入の相談 -->
    <section class="card" id="purchase">
      <h2 class="card-title">車両購入の相談</h2>
      <p class="card-desc">メーカーを選ぶと車種が選べるようになります。備考も入れてLINE下書きに反映できます。</p>

      <div class="grid grid-2">
        <div class="field">
          <label class="label" for="purchaseMaker">メーカー</label>
          <select class="select" id="purchaseMaker">
            <option value="">選択してください</option>
            <option value="ダイハツ">ダイハツ</option>
            <option value="スズキ">スズキ</option>
            <option value="ホンダ">ホンダ</option>
            <option value="トヨタ">トヨタ</option>
            <option value="日産">日産</option>
            <option value="三菱">三菱</option>
            <option value="マツダ">マツダ</option>
            <option value="スバル">スバル</option>
            <option value="いすゞ">いすゞ</option>
            <option value="その他">その他</option>
          </select>
        </div>

        <div class="field">
          <label class="label" for="purchaseModel">車種</label>
          <select class="select" id="purchaseModel" disabled>
            <option value="">メーカーを選んでください</option>
          </select>
        </div>
      </div>

      <div class="field">
        <label class="label" for="purchaseNote">備考</label>
        <textarea class="textarea" id="purchaseNote" rows="3" placeholder="例：予算/希望納期/中古OKか など（未入力でもOK）"></textarea>
      </div>

      <div class="actions">
        <button class="btn btn-line" type="button" id="btnPurchaseLine">LINEで相談する（下書き）</button>
        <a class="btn btn-secondary" href="https://line.me/R/ti/p/%40277rcesk" target="_blank" rel="noopener">友だち追加（未追加の人）</a>
      </div>
    </section>

    <!-- 2) リース/レンタルの相談 -->
    <section class="card" id="lease">
      <h2 class="card-title">リース・レンタルの相談</h2>
      <p class="card-desc">希望条件を選んで、備考も入れて送れます。</p>

      <div class="grid grid-2">
        <div class="field">
          <label class="label" for="leasePeriod">希望期間</label>
          <select class="select" id="leasePeriod">
            <option value="">選択してください</option>
            <option value="3ヶ月">3ヶ月</option>
            <option value="6ヶ月">6ヶ月</option>
            <option value="12ヶ月">12ヶ月</option>
            <option value="24ヶ月">24ヶ月</option>
            <option value="未定">未定</option>
          </select>
        </div>

        <div class="field">
          <label class="label" for="leaseBudget">月額上限</label>
          <select class="select" id="leaseBudget">
            <option value="">選択してください</option>
            <option value="〜3万円">〜3万円</option>
            <option value="〜4万円">〜4万円</option>
            <option value="〜5万円">〜5万円</option>
            <option value="〜6万円">〜6万円</option>
            <option value="未定">未定</option>
          </select>
        </div>
      </div>

      <div class="field">
        <label class="label" for="leaseNote">備考</label>
        <textarea class="textarea" id="leaseNote" rows="3" placeholder="例：走行距離/保険込み希望 など（未入力でもOK）"></textarea>
      </div>

      <div class="actions">
        <button class="btn btn-line" type="button" id="btnLeaseLine">LINEで相談する（下書き）</button>
        <a class="btn btn-secondary" href="https://line.me/R/ti/p/%40277rcesk" target="_blank" rel="noopener">友だち追加（未追加の人）</a>
      </div>
    </section>

    <!-- 3) 修理/整備の相談 -->
    <section class="card" id="repair">
      <h2 class="card-title">修理・整備の相談</h2>
      <p class="card-desc">症状や状況を備考に書いて送れます。</p>

      <div class="field">
        <label class="label" for="repairNote">備考</label>
        <textarea class="textarea" id="repairNote" rows="3" placeholder="例：異音がする/オイル漏れ/警告灯 など（未入力でもOK）"></textarea>
      </div>

      <div class="actions">
        <button class="btn btn-line" type="button" id="btnRepairLine">LINEで相談する（下書き）</button>
        <a class="btn btn-secondary" href="https://line.me/R/ti/p/%40277rcesk" target="_blank" rel="noopener">友だち追加（未追加の人）</a>
      </div>
    </section>

    <!-- 4) 車検/保険の相談 -->
    <section class="card" id="inspection">
      <h2 class="card-title">車検・保険の相談</h2>
      <p class="card-desc">車検時期や条件を備考に書いて送れます。</p>

      <div class="field">
        <label class="label" for="inspectionNote">備考</label>
        <textarea class="textarea" id="inspectionNote" rows="3" placeholder="例：車検がいつ/任意保険の見直し など（未入力でもOK）"></textarea>
      </div>

      <div class="actions">
        <button class="btn btn-line" type="button" id="btnInspectionLine">LINEで相談する（下書き）</button>
        <a class="btn btn-secondary" href="https://line.me/R/ti/p/%40277rcesk" target="_blank" rel="noopener">友だち追加（未追加の人）</a>
      </div>
    </section>

    <section class="card card-soft">
      <h2 class="card-title">登録がまだの人へ</h2>
      <p class="card-desc">相談より先に登録しておくと、案内がスムーズです。</p>
      <div class="actions">
        <a class="btn btn-primary" href="./register.html">協力ドライバー登録へ</a>
        <a class="btn btn-secondary" href="./index.html">トップへ戻る</a>
      </div>
    </section>
  </main>

  <footer class="site-footer">
    <div class="container footer-inner">
      <div class="footer-links">
        <a href="./privacy.html">プライバシー</a>
        <a href="./terms.html">利用規約</a>
      </div>
      <div class="footer-copy">© drivers-site</div>
    </div>
  </footer>

  <script>
    // 共通：ヘッダー右上のLINEリンク（下書き入り）
    (function () {
      var lineLink = document.getElementById("headerLineLink");
      if (!lineLink) return;

      var base = "https://line.me/R/oaMessage/%40277rcesk/";
      var text =
        "【相談カテゴリ】\n車両の相談（全般）\n\n【備考】\n未入力";
      lineLink.href = base + encodeURIComponent(text);
    })();

    // 各ボタン：LINE下書き生成（line-consult.js を利用）
    (function () {
      function safe(v) { return (v || "").trim(); }
      function emptyTo(v) { return safe(v) ? safe(v) : "未入力"; }

      function openLineDraft(text) {
        var oa = "https://line.me/R/oaMessage/%40277rcesk/" + encodeURIComponent(text);
        var fb = "https://line.me/R/msg/text/?" + encodeURIComponent(text);
        try {
          window.location.href = oa;
        } catch (e) {
          window.location.href = fb;
        }
      }

      // 1) purchase
      var btnPurchase = document.getElementById("btnPurchaseLine");
      if (btnPurchase) {
        btnPurchase.addEventListener("click", function () {
          var maker = safe(document.getElementById("purchaseMaker")?.value);
          var model = safe(document.getElementById("purchaseModel")?.value);
          var note = emptyTo(document.getElementById("purchaseNote")?.value);

          var lines = [];
          lines.push("【相談カテゴリ】");
          lines.push("車両購入の相談");
          lines.push("");
          if (maker || model) {
            lines.push("【選択内容】");
            if (maker) lines.push("・メーカー： " + maker);
            if (model) lines.push("・車種： " + model);
            lines.push("");
          }
          lines.push("【備考】");
          lines.push(note);

          openLineDraft(lines.join("\n"));
        });
      }

      // 2) lease
      var btnLease = document.getElementById("btnLeaseLine");
      if (btnLease) {
        btnLease.addEventListener("click", function () {
          var period = safe(document.getElementById("leasePeriod")?.value);
          var budget = safe(document.getElementById("leaseBudget")?.value);
          var note = emptyTo(document.getElementById("leaseNote")?.value);

          var lines = [];
          lines.push("【相談カテゴリ】");
          lines.push("リース・レンタルの比較");
          lines.push("");
          if (period || budget) {
            lines.push("【選択内容】");
            if (period) lines.push("・希望期間： " + period);
            if (budget) lines.push("・月額上限： " + budget);
            lines.push("");
          }
          lines.push("【備考】");
          lines.push(note);

          openLineDraft(lines.join("\n"));
        });
      }

      // 3) repair
      var btnRepair = document.getElementById("btnRepairLine");
      if (btnRepair) {
        btnRepair.addEventListener("click", function () {
          var note = emptyTo(document.getElementById("repairNote")?.value);

          var text =
            "【相談カテゴリ】\n修理・整備の相談\n\n【備考】\n" + note;
          openLineDraft(text);
        });
      }

      // 4) inspection
      var btnInspection = document.getElementById("btnInspectionLine");
      if (btnInspection) {
        btnInspection.addEventListener("click", function () {
          var note = emptyTo(document.getElementById("inspectionNote")?.value);

          var text =
            "【相談カテゴリ】\n車検・保険の相談\n\n【備考】\n" + note;
          openLineDraft(text);
        });
      }
    })();

    // 車種連動（drivers.js の DB がある場合だけ）
    window.addEventListener("DOMContentLoaded", function () {
      var maker = document.getElementById("purchaseMaker");
      var model = document.getElementById("purchaseModel");
      if (!maker || !model) return;
      if (!window.DriversRegister || !window.DriversRegister.updatePurchaseModelSelect) return;

      maker.addEventListener("change", function () {
        window.DriversRegister.updatePurchaseModelSelect(maker, model);
      });

      // 初期
      window.DriversRegister.updatePurchaseModelSelect(maker, model);
    });
  </script>
</body>
</html>
