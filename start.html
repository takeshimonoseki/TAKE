<!doctype html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>開業トータル相談（LINE）｜drivers-site（山口県）</title>
  <meta name="description" content="開業トータル相談。段階を選んでからLINE送信できます。" />
  <link rel="stylesheet" href="./drivers.css" />
  <script src="./config.js"></script>

  <style>
    .btn-line{ background: linear-gradient(135deg,#06C755,#00B900) !important; }
    .btn-secondary{
      background: rgba(255,255,255,.10) !important;
      border: 1px solid rgba(255,255,255,.18) !important;
      color: inherit !important;
    }
    .start-wrap{ max-width: 980px; margin: 0 auto; padding: 22px 14px 40px; }
    .start-card{ margin-top: 14px; }
    .start-grid{ display:grid; grid-template-columns: 1fr 1fr; gap: 12px; }
    @media (max-width: 820px){ .start-grid{ grid-template-columns: 1fr; } }
    .start-h{ margin: 0 0 6px; }
    .start-lead{ margin: 0 0 12px; }
    .radio-row label, .check-row label{ display:flex; gap:10px; align-items:flex-start; padding:10px 12px; border: 1px solid rgba(255,255,255,.14); border-radius: 14px; background: rgba(0,0,0,.10); cursor:pointer; }
    .radio-row input, .check-row input{ margin-top: 3px; }
    .muted{ opacity:.78; font-size: 12px; line-height: 1.6; }
    .field{ width:100%; padding: 10px 12px; border-radius: 12px; border:1px solid rgba(255,255,255,.14); background: rgba(255,255,255,.07); color: inherit; outline:none; }
    .field:focus{ border-color: rgba(34,197,94,.6); box-shadow: 0 0 0 3px rgba(34,197,94,.18); }
    .actions{ display:flex; gap:10px; flex-wrap:wrap; margin-top: 12px; }
  </style>
</head>

<body>
  <header class="site-header" id="top">
    <div class="site-header-inner">
      <div class="header-left">
        <div class="region-badge" aria-label="対応地域">
          <div class="region-en">START</div>
          <div class="region-ja">開業相談</div>
        </div>
        <div class="brand">
          <div class="brand-mark" aria-hidden="true"><span></span></div>
          <div>
            <div class="company-name" id="companyName">軽貨物TAKE</div>
            <div class="brand-text-sub">段階を選んでからLINE送信</div>
          </div>
        </div>
      </div>
      <div class="header-right">
        <nav class="nav" aria-label="メイン">
          <a href="./index.html#top" class="nav-link">トップ</a>
          <a href="./vehicle.html" class="nav-link">車両の相談</a>
          <a href="./register.html" class="nav-link">登録</a>
        </nav>
      </div>
    </div>
  </header>

  <main class="page">
    <div class="start-wrap">
      <article class="card start-card">
        <div class="card-inner">
          <h1 class="hero-title start-h">開業トータル相談（LINE）</h1>
          <p class="hero-lead start-lead">
            「どの段階か」を選ぶ → 文面を作る → LINEを開いて送る、の流れです。
          </p>

          <div class="start-grid">
            <section>
              <h2 class="section-title" style="margin:0 0 10px;">① 段階を選ぶ</h2>
              <div class="radio-row" style="display:grid; gap:10px;">
                <label><input type="radio" name="stage" value="未経験（これから）" checked /> <span><b>未経験（これから）</b><br><span class="muted">車両・黒ナンバー・保険・確定申告、全体像から整理したい</span></span></label>
                <label><input type="radio" name="stage" value="準備中（もうすぐ）" /> <span><b>準備中（もうすぐ）</b><br><span class="muted">書類や車両の目途はあるが、詰めを確認したい</span></span></label>
                <label><input type="radio" name="stage" value="稼働中（相談）" /> <span><b>稼働中（相談）</b><br><span class="muted">保険・税務・車両維持など、運用の相談をしたい</span></span></label>
              </div>

              <h2 class="section-title" style="margin:14px 0 10px;">② 相談内容（複数OK）</h2>
              <div class="check-row" style="display:grid; gap:10px;">
                <label><input type="checkbox" name="topic" value="黒ナンバー" checked /> 黒ナンバー</label>
                <label><input type="checkbox" name="topic" value="保険" checked /> 保険</label>
                <label><input type="checkbox" name="topic" value="確定申告" checked /> 確定申告</label>
                <label><input type="checkbox" name="topic" value="車両" /> 車両</label>
                <label><input type="checkbox" name="topic" value="その他" /> その他</label>
              </div>
            </section>

            <section>
              <h2 class="section-title" style="margin:0 0 10px;">③ 追加情報（任意）</h2>

              <div class="muted" style="margin-bottom:8px;">車両の有無</div>
              <select id="hasVehicle" class="field">
                <option value="">未選択</option>
                <option value="あり">あり</option>
                <option value="なし">なし</option>
                <option value="検討中">検討中</option>
              </select>

              <div class="muted" style="margin:12px 0 8px;">いつから稼働したいか（任意）</div>
              <input id="whenStart" class="field" placeholder="例：来月から／3ヶ月後" />

              <div class="muted" style="margin:12px 0 8px;">希望連絡方法（任意）</div>
              <select id="contactMethod" class="field">
                <option value="">未選択（LINEでOK）</option>
                <option value="LINE">LINE</option>
                <option value="電話">電話</option>
                <option value="メール">メール</option>
              </select>

              <div class="muted" style="margin:12px 0 8px;">自由記入（任意）</div>
              <textarea id="free" class="field" rows="6" placeholder="例：予算感、稼働エリア、困っていること、急ぎ度 など"></textarea>

              <div class="actions">
                <a class="btn btn-secondary" id="btnAddFriend" href="#" target="_blank" rel="noopener noreferrer">① まず友だち追加する</a>
                <button class="btn btn-line" type="button" id="btnOpenLine">② LINEを開いて送る</button>
              </div>

              <div class="muted" style="margin-top:10px;">
                ※ 公式アカウントID（@xxxx）が config.js に入っていると、②は“直接トーク”で開きます。<br>
                ※ 未設定の場合は「共有（宛先選択）」で開きます。
              </div>
            </section>
          </div>
        </div>
      </article>
    </div>
  </main>

  <script>
    (function(){
      var C = window.CONFIG || {};
      var addUrl = (C.LINE_URL || "").trim();
      var oa = (C.LINE_OA_ID || "").trim();

      var companyName = document.getElementById("companyName");
      if (companyName && C.COMPANY_NAME) companyName.textContent = C.COMPANY_NAME;

      var btnAdd = document.getElementById("btnAddFriend");
      if (btnAdd) btnAdd.href = addUrl || "#";

      function getChecked(name){
        return Array.prototype.slice.call(document.querySelectorAll('input[name="'+name+'"]:checked')).map(function(el){ return el.value; });
      }
      function getStage(){
        var el = document.querySelector('input[name="stage"]:checked');
        return el ? el.value : "";
      }

      function lineUrlForText(text){
        var msg = String(text||"").trim();
        if (!msg) msg = "相談します。";
        if (oa){
          if (oa[0] !== "@") oa = "@" + oa;
          return "https://line.me/R/oaMessage/" + encodeURIComponent(oa) + "/?" + encodeURIComponent(msg);
        }
        return "https://line.me/R/share?text=" + encodeURIComponent(msg);
      }

      document.getElementById("btnOpenLine").addEventListener("click", function(){
        var lines = [];
        lines.push("【開業トータル相談】");
        lines.push("段階：" + (getStage() || "未選択"));
        var topics = getChecked("topic");
        if (topics.length) lines.push("相談内容：" + topics.join("・"));

        var hv = document.getElementById("hasVehicle").value;
        if (hv) lines.push("車両の有無：" + hv);

        var ws = document.getElementById("whenStart").value.trim();
        if (ws) lines.push("いつから稼働したいか：" + ws);

        var cm = document.getElementById("contactMethod").value;
        if (cm) lines.push("希望連絡：" + cm);

        var free = document.getElementById("free").value.trim();
        if (free) lines.push("自由記入：" + free);

        var url = lineUrlForText(lines.join("\n"));
        window.open(url, "_blank", "noopener,noreferrer");
      });
    })();
  </script>
</body>
</html>
