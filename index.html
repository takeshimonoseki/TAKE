<!DOCTYPE html>

<html class="scroll-smooth" lang="ja">

<head>
  <meta charset="utf-8" />
  <meta content="width=device-width,initial-scale=1" name="viewport" />
  <title>配送サービス｜軽貨物TAKE（山口県）</title>
  <meta content="山口県エリアの安心・丁寧な配送サービス。お引越しからスポット配送まで、LINEで簡単にご依頼いただけます。" name="description" />
  <link href="https://takeshimonoseki.github.io/" rel="canonical" />
  <meta content="配送サービス｜軽貨物TAKE（山口県）" property="og:title" />
  <meta content="山口県エリアの安心・丁寧な配送サービス。LINEで簡単にご依頼。" property="og:description" />
  <meta content="https://takeshimonoseki.github.io/" property="og:url" />
  <meta content="website" property="og:type" />
  <!-- Fonts: Inter + Noto Sans JP -->
  <link href="https://fonts.googleapis.com" rel="preconnect" />
  <link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect" />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&family=Noto+Sans+JP:wght@400;500;700;800;900&display=swap"
    rel="stylesheet" />
  <!-- Tailwind CSS (CDN) -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            dark: {
              900: "#0a0f1a",
              800: "#111827",
              700: "#1e293b",
            },
            accent: {
              blue: "#3b82f6",
              indigo: "#6366f1",
              orange: "#f97316",
              amber: "#f59e0b",
            },
          },
          fontFamily: {
            sans: [
              "Inter",
              "Noto Sans JP",
              "Hiragino Kaku Gothic ProN",
              "sans-serif",
            ],
          },
          borderRadius: {
            "2xl": "20px",
            "3xl": "24px",
            "4xl": "32px",
          },
        },
      },
    };
  </script>
  <link href="./customer.css" rel="stylesheet" />
  <script src="./config.js"></script>
  <script>
    document.documentElement.classList.add("js");
  </script>
  <!-- Icons -->
  <script src="https://unpkg.com/lucide@latest"></script>
</head>

<body class="bg-dark-900 text-slate-100 min-h-screen">
  <!-- ═══════════════════════════════════════════════════════ -->
  <!-- HEADER — Transparent, blurs on scroll                 -->
  <!-- ═══════════════════════════════════════════════════════ -->
  <header class="site-header" id="top">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 h-16 flex items-center justify-between">
      <!-- Left: Brand -->
      <div class="flex items-center gap-4">
        <div aria-label="対応地域" class="hidden sm:flex region-badge">
          <div class="region-en" id="regionEn">YAMAGUCHI</div>
          <div class="region-ja" id="regionJa">山口県</div>
        </div>
        <a class="brand group" data-scroll-top="" href="#top">
          <div aria-hidden="true" class="brand-mark group-hover:scale-110 transition-transform duration-300">
            <span class="brand-mark-inner"></span>
          </div>
          <div>
            <div class="text-sm font-black tracking-wide leading-none" id="companyName">
              軽貨物TAKE
            </div>
            <div class="text-[10px] text-slate-500 font-bold mt-0.5">
              DELIVERY SERVICE
            </div>
          </div>
        </a>
      </div>
      <!-- Right: Contact + Nav -->
      <div class="header-right flex items-center gap-3 sm:gap-4">
        <div aria-label="連絡先" class="hidden lg:flex items-center gap-3 text-xs text-slate-500">
          <a class="btn-link-text hover:text-blue-400 transition-colors" href="#" id="headerLineLink">LINE相談</a>
          <span aria-hidden="true" class="text-slate-700">|</span>
          <a class="btn-link-text hover:text-blue-400 transition-colors" href="#"
            id="headerMailLink">takeshimonoseki@gmail.com</a>
        </div>
        <nav aria-label="メイン" class="hidden md:flex items-center gap-1 nav">
          <a aria-current="page" class="nav-link active" data-scroll-top="" href="#top">トップ</a>
          <a class="nav-link" href="#services">サービス</a>
          <a class="nav-link" href="#pricing">料金</a>
          <a class="nav-link" href="#request-form" style="
                background: linear-gradient(135deg, #3b82f6, #6366f1);
                color: white;
                border: none;
              ">依頼する</a>
        </nav>
        <a aria-label="依頼する" class="btn btn-primary btn-sm md:hidden" href="#request-form">
          <i aria-hidden="true" class="w-5 h-5" data-lucide="package"></i>
        </a>
      </div>
    </div>
  </header>

  <!-- ═══════════════════════════════════════════════════════ -->
  <!-- VIDEO HERO                                             -->
  <!-- ═══════════════════════════════════════════════════════ -->
  <section class="video-hero" id="hero">
    <!-- Background Video -->
    <div class="video-hero__bg">
      <video autoplay muted loop playsinline preload="auto"
        poster="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1920 1080'%3E%3Crect fill='%230a0f1a' width='1920' height='1080'/%3E%3C/svg%3E">
        <source
          src="https://videos.pexels.com/video-files/2800369/2800369-uhd_2560_1440_30fps.mp4"
          type="video/mp4" />
      </video>
    </div>
    <!-- Dark Overlay -->
    <div class="video-hero__overlay"></div>
    <!-- Ambient Mesh Gradient -->
    <div class="video-hero__mesh"></div>

    <!-- Hero Content -->
    <div class="video-hero__content">
      <div class="hero-grid">
        <!-- Left: Message -->
        <div class="hero-left reveal-hidden">
          <div class="flex items-center gap-2 text-xs font-extrabold flex-wrap">
            <span class="pill">山口県エリア対応</span>
            <span class="pill pill-soft">スポット配送・引越し</span>
            <span class="pill pill-soft">当日相談OK</span>
          </div>
          <h1 class="hero-title mt-6">
            <span class="block">「迷わない」配送依頼。</span>
            <span class="block"><span class="gradient-text">LINE</span>で完結。</span>
          </h1>
          <p class="hero-lead mt-4">
            まずは距離と荷物量だけでもOK。<br />
            料金目安→依頼→受付通知まで、スムーズにご案内します。
          </p>
          <ul class="hero-points mt-6">
            <li>
              <i class="w-5 h-5" data-lucide="check-circle"></i>
              即レス重視（運営が窓口）
            </li>
            <li>
              <i class="w-5 h-5" data-lucide="check-circle"></i>
              見積りだけでもOK
            </li>
            <li>
              <i class="w-5 h-5" data-lucide="check-circle"></i>
              当日・夜間の相談も可
            </li>
          </ul>
          <div class="hero-cta mt-8 flex flex-wrap gap-3">
            <a class="btn btn-primary" href="#request-form">
              <i class="w-4 h-4" data-lucide="package"></i> 配送を依頼
            </a>
            <a class="btn btn-line" href="#" id="heroLineBtn" rel="noopener noreferrer" target="_blank">
              <i class="w-4 h-4" data-lucide="message-circle"></i> LINE相談
            </a>
          </div>
        </div>

        <!-- Right: Fare Calculator Card -->
        <aside class="hero-right reveal-hidden delay-200">
          <div class="fare-calc-card">
            <h2 class="fare-calc-title">
              <span class="calc-icon">
                <i class="w-5 h-5 text-white" data-lucide="calculator"></i>
              </span>
              運賃計算機
            </h2>
            <p class="fare-calc-lead">
              運賃の目安は「専用ページ」でそのまま計算できます。<br>
              距離と荷物量を入力するだけ、すぐに目安が分かります。
            </p>
            <div class="mt-6">
              <a class="btn btn-primary w-full" href="./farecalc.html"
                style="background: linear-gradient(135deg, #f97316, #f59e0b); box-shadow: 0 6px 20px rgba(249, 115, 22, 0.3);">
                <i class="w-5 h-5" data-lucide="calculator"></i>
                運賃を計算する
              </a>
              <p class="smallNote mt-3 text-center">※「運ぶ・移動」の運賃計算機のみ表示します。</p>
            </div>

            <!-- Quick-info pills inside card -->
            <div class="mt-6 pt-5" style="border-top: 1px solid rgba(255,255,255,0.08);">
              <div class="grid grid-cols-2 gap-3">
                <div class="text-center p-3 rounded-xl" style="background: rgba(255,255,255,0.04);">
                  <div class="text-xl font-black text-blue-400">20km</div>
                  <div class="text-xs text-slate-500 mt-1">圏内出張無料</div>
                </div>
                <div class="text-center p-3 rounded-xl" style="background: rgba(255,255,255,0.04);">
                  <div class="text-xl font-black text-orange-400">¥3,000〜</div>
                  <div class="text-xs text-slate-500 mt-1">スポット配送</div>
                </div>
              </div>
            </div>
          </div>
        </aside>
      </div>
    </div>

    <!-- Scroll indicator -->
    <div class="absolute bottom-8 left-1/2 -translate-x-1/2 z-10 text-center" style="animation: float 2s ease-in-out infinite;">
      <div class="text-slate-500 text-xs font-bold mb-2">SCROLL</div>
      <div class="w-6 h-10 rounded-full border-2 border-slate-600 mx-auto flex items-start justify-center pt-2">
        <div class="w-1 h-2 bg-blue-400 rounded-full" style="animation: float 1.5s ease-in-out infinite;"></div>
      </div>
    </div>
  </section>

  <!-- ═══════════════════════════════════════════════════════ -->
  <!-- MAIN CONTENT                                           -->
  <!-- ═══════════════════════════════════════════════════════ -->
  <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pb-16">

    <!-- ─── STATS COUNTER ─── -->
    <section class="stats-section reveal-hidden" id="stats">
      <div class="text-center mb-10">
        <h2 class="section-title">数字で見る軽貨物TAKE</h2>
        <p class="section-subtitle">確かな実績と安心のサービス</p>
      </div>
      <div class="stats-grid">
        <div class="stat-item glass-card reveal-hidden">
          <div class="stat-number" data-count="500">0<span class="stat-unit">件+</span></div>
          <div class="stat-label">配送実績</div>
        </div>
        <div class="stat-item glass-card reveal-hidden delay-100">
          <div class="stat-number" data-count="98">0<span class="stat-unit">%</span></div>
          <div class="stat-label">お客様満足度</div>
        </div>
        <div class="stat-item glass-card reveal-hidden delay-200">
          <div class="stat-number" data-count="2">0<span class="stat-unit">県</span></div>
          <div class="stat-label">対応エリア</div>
        </div>
      </div>
    </section>

    <!-- ─── HOW IT WORKS (Steps) ─── -->
    <section class="mb-16 section-anchor reveal-hidden" id="flow">
      <div class="text-center mb-2">
        <h2 class="section-title">ご利用の流れ</h2>
        <p class="section-subtitle">4ステップでかんたん依頼</p>
      </div>
      <div class="steps-grid">
        <div class="step-card glass-card reveal-hidden">
          <div class="step-number">1</div>
          <div class="step-title">LINE / フォームで相談</div>
          <div class="step-desc">距離と荷物量だけでもOK。まずはお気軽にご連絡ください。</div>
        </div>
        <div class="step-card glass-card reveal-hidden delay-100">
          <div class="step-number">2</div>
          <div class="step-title">料金の目安を確認</div>
          <div class="step-desc">運賃計算機で即時見積。条件に合わせて調整します。</div>
        </div>
        <div class="step-card glass-card reveal-hidden delay-200">
          <div class="step-number">3</div>
          <div class="step-title">日時・条件を確定</div>
          <div class="step-desc">希望日時や積み下ろし条件を最終確認して合意します。</div>
        </div>
        <div class="step-card glass-card reveal-hidden delay-300">
          <div class="step-number">4</div>
          <div class="step-title">配送 → 完了</div>
          <div class="step-desc">当日配送・当日決済。安全・丁寧にお届けします。</div>
        </div>
      </div>
    </section>

    <!-- ─── SERVICES BENTO GRID ─── -->
    <section class="mb-16 section-anchor" id="services">
      <div class="text-center mb-10">
        <h2 class="section-title">サービス</h2>
        <p class="section-subtitle">お客様のニーズに合わせた柔軟な配送サービス</p>
      </div>
      <div class="bento-grid">
        <!-- Service: Spot Delivery -->
        <div class="glass-card p-6 reveal-hidden">
          <div class="bento-icon">
            <i class="w-6 h-6" data-lucide="truck"></i>
          </div>
          <h3 class="bento-title mt-3">スポット配送</h3>
          <p class="bento-text mt-2">
            緊急配送、単発の荷物運び、当日対応など。まずは距離と荷物量を
            教えてください。
          </p>
          <ul class="bento-list mt-4">
            <li>単発OK / 早朝・夜間相談</li>
            <li>個人・法人どちらも対応</li>
          </ul>
        </div>
        <!-- Service: Move -->
        <div class="glass-card p-6 reveal-hidden delay-100">
          <div class="bento-icon" style="background: rgba(249, 115, 22, 0.1); color: #f97316;">
            <i class="w-6 h-6" data-lucide="home"></i>
          </div>
          <h3 class="bento-title mt-3">引越し・荷物運び</h3>
          <p class="bento-text mt-2">
            単身〜少量引越し。家具家電の運搬もご相談ください。
          </p>
          <ul class="bento-list mt-4">
            <li>荷物量・階数・距離で見積</li>
            <li>積み下ろし条件も相談可</li>
          </ul>
        </div>
        <!-- Service: Corporate -->
        <div class="glass-card p-6 reveal-hidden delay-200">
          <div class="bento-icon" style="background: rgba(16, 185, 129, 0.1); color: #10b981;">
            <i class="w-6 h-6" data-lucide="building-2"></i>
          </div>
          <h3 class="bento-title mt-3">法人配送</h3>
          <p class="bento-text mt-2">
            定期・スポットどちらもOK。現場条件に合わせて柔軟に対応します。
          </p>
          <ul class="bento-list mt-4">
            <li>定期便・チャーター相談</li>
            <li>請求書対応も可</li>
          </ul>
        </div>
        <!-- Service: Simple CTA -->
        <div class="glass-card p-6 bento-cta reveal-hidden delay-300">
          <h3 class="bento-title">まずは料金の目安を確認</h3>
          <p class="bento-text mt-2">
            「高いかも…」の不安を先に解消。目安を見てから依頼できます。
          </p>
          <a class="btn btn-primary mt-5" href="#pricing">
            <i class="w-4 h-4" data-lucide="calculator"></i> 料金を見る
          </a>
        </div>
      </div>
    </section>

    <!-- ─── PRICING ─── -->
    <section class="mb-16 section-anchor" id="pricing">
      <div class="glass-card p-7 md:p-8 reveal-hidden">
        <div class="flex items-center justify-between flex-wrap gap-3">
          <h2 class="section-title">料金</h2>
          <div class="text-xs text-slate-500 font-bold">
            ※ 正確な金額は条件で変動します（まずは目安）
          </div>
        </div>
        <div class="pricing-grid mt-6">
          <div class="price-card">
            <div class="price-kicker">スポット配送</div>
            <div class="price-main">¥3,000〜</div>
            <div class="price-sub">距離・荷物量で変動</div>
          </div>
          <div class="price-card">
            <div class="price-kicker">引越し</div>
            <div class="price-main">¥8,000〜</div>
            <div class="price-sub">荷物量・階数で変動</div>
          </div>
          <div class="price-card">
            <div class="price-kicker">法人</div>
            <div class="price-main">要相談</div>
            <div class="price-sub">定期・チャーター</div>
          </div>
        </div>
        <div class="mt-6 rounded-2xl p-5" style="background: rgba(255,255,255,0.03); border: 1px solid rgba(255,255,255,0.06);">
          <div class="text-sm font-black text-slate-200">
            料金の目安を出すには？
          </div>
          <div class="mt-2 text-sm text-slate-400 leading-relaxed">
            「発地/着地」「荷物の量」「希望日時」だけでもOK。まずはフォームで送ってください。
          </div>
          <div class="mt-4 flex flex-wrap gap-3">
            <a class="btn btn-primary" href="#request-form">
              <i class="w-4 h-4" data-lucide="package"></i> 依頼フォームへ
            </a>
            <a class="btn btn-line" href="#" id="contactLineBtn" rel="noopener noreferrer" target="_blank">
              <i class="w-4 h-4" data-lucide="message-circle"></i> LINE相談
            </a>
          </div>
        </div>
      </div>
    </section>

    <!-- ─── REQUEST FORM ─── -->
    <section class="mb-16 section-anchor" id="request-form">
      <div class="glass-card p-7 md:p-8 reveal-hidden">
        <div class="flex items-start justify-between gap-6 flex-wrap">
          <div>
            <h2 class="section-title">配送を依頼</h2>
            <p class="text-sm text-slate-400 mt-2">
              まずは必要な項目だけでOK。送信後、受付通知→LINEで条件調整できます。
            </p>
          </div>
          <div class="text-xs text-slate-500 font-bold">
            ※ LINE/メールのみ受付
          </div>
        </div>
        <input id="fareEstimatePayload" name="fareEstimatePayload" type="hidden" value="" />
        <div class="mt-6 rounded-2xl p-5" style="background: rgba(255,255,255,0.03); border: 1px solid rgba(255,255,255,0.06);">
          <div class="text-sm font-black text-slate-200">準備中</div>
          <div class="mt-2 text-sm text-slate-400">
            依頼フォーム送信 → スプレッドシート保存 → LINE通知 は次のステップで仕上げます。未設定の場合はLINE相談へ誘導します。
          </div>
        </div>
      </div>
    </section>

    <!-- ─── FAQ ─── -->
    <section class="mb-16 section-anchor" id="faq">
      <div class="glass-card p-7 md:p-8 reveal-hidden">
        <h2 class="section-title">FAQ</h2>
        <div class="faq-list mt-6">
          <details class="faq-item">
            <summary>見積だけでも大丈夫？</summary>
            <div class="faq-body">
              もちろんOKです。距離と荷物量だけでも目安をお伝えできます。
            </div>
          </details>
          <details class="faq-item">
            <summary>当日でも依頼できますか？</summary>
            <div class="faq-body">
              状況によりますが、まずはLINEでご相談ください。
            </div>
          </details>
        </div>
      </div>
    </section>

    <!-- ─── NEWS ─── -->
    <section class="mb-16 section-anchor" id="news">
      <div class="glass-card p-7 md:p-8 reveal-hidden">
        <h2 class="section-title">お知らせ</h2>
        <div class="mt-6" id="newsList"></div>
        <div class="mt-4 text-sm text-slate-500" id="newsNone" style="display:none;">
          現在お知らせはありません。
        </div>
      </div>
    </section>
  </main>

  <!-- ═══════════════════════════════════════════════════════ -->
  <!-- FOOTER                                                 -->
  <!-- ═══════════════════════════════════════════════════════ -->
  <footer class="site-footer">
    <div class="footer-inner max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="footer-top">
        <div class="footer-brand">
          <div class="footer-title" id="footerCompany">
            軽貨物TAKE｜配送サービス（山口県）
          </div>
          <div class="footer-sub">
            運営が窓口で安心。配送のご依頼・見積相談はLINEが最短です。
          </div>
        </div>
        <div class="footer-cta">
          <a class="btn btn-line btn-footer" href="#" id="footerLineBtn" rel="noopener noreferrer" target="_blank">
            <i class="w-4 h-4" data-lucide="message-circle"></i> LINE相談
          </a>
          <a class="btn btn-primary btn-footer" href="#request-form">
            <i class="w-4 h-4" data-lucide="package"></i> 依頼する
          </a>
        </div>
      </div>
      <div class="footer-links mt-8">
        <a href="./terms.html">利用規約</a>
        <a href="./privacy.html">プライバシー</a>
        <a href="./sitemap.xml">サイトマップ</a>
      </div>
      <div class="footer-bottom mt-4">
        <div class="text-xs text-slate-600">© 2026 軽貨物TAKE</div>
        <a class="text-xs text-slate-600 hover:text-blue-400" href="./register.html">ドライバー登録はこちら</a>
      </div>
    </div>
  </footer>

  <!-- Back to Top Button -->
  <button class="back-to-top" id="backToTop" aria-label="ページトップへ">
    <i class="w-5 h-5" data-lucide="chevron-up"></i>
  </button>

  <script>

    (function () {
      // ✅ Safety: まず本文を表示（reveal-hidden が消えない事故の保険）
      try {
        document.querySelectorAll(".reveal-hidden").forEach(function (el) {
          el.classList.add("reveal-visible");
        });
      } catch (e) { }

      // Initialize Lucide Icons
      try {
        if (window.lucide && typeof window.lucide.createIcons === "function") {
          window.lucide.createIcons();
        }
      } catch (e) { }

      try {
        // CONFIG からヘッダー・フッター情報を反映
        (function applyConfig() {
          if (!window.CONFIG) return;
          var regionJa = document.getElementById("regionJa");
          var regionEn = document.getElementById("regionEn");
          var regionKicker = document.getElementById("regionKicker");
          var companyName = document.getElementById("companyName");
          var footerCompany = document.getElementById("footerCompany");

          if (regionJa)
            regionJa.textContent = window.CONFIG.REGION_LABEL || "山口県";
          if (regionEn)
            regionEn.textContent = (
              window.CONFIG.REGION_CODE || "YAMAGUCHI"
            ).toUpperCase();
          if (regionKicker)
            regionKicker.textContent =
              (window.CONFIG.REGION_LABEL || "山口県") + "エリア対応";
          if (companyName)
            companyName.textContent = window.CONFIG.COMPANY_NAME || "軽貨物TAKE";
          if (footerCompany) {
            footerCompany.textContent =
              (window.CONFIG.COMPANY_NAME || "軽貨物TAKE") +
              "｜配送サービス（" +
              (window.CONFIG.REGION_LABEL || "山口県") +
              "）";
          }

          var mailLink = document.getElementById("headerMailLink");
          var email = window.CONFIG.EMAIL_TO || "";

          var lineUrl = window.CONFIG.LINE_URL || "https://line.me/R/ti/p/%40277rcesk";
          ["headerLineLink", "heroLineBtn", "contactLineBtn", "footerLineBtn"].forEach(function (id) {
            var el = document.getElementById(id);
            if (el) el.href = lineUrl;
          });

          if (mailLink && email) {
            mailLink.href = "mailto:" + email;
            mailLink.textContent = email;
          }

          // Mail buttons
          var contactMailBtn = document.getElementById("contactMailBtn");
          if (contactMailBtn && email)
            contactMailBtn.href =
              "mailto:" +
              email +
              "?subject=" +
              encodeURIComponent("【配送依頼】お問い合わせ");
        })();

        // Smooth scroll for nav
        document.querySelectorAll('a[href^="#"]').forEach((a) => {
          a.addEventListener("click", (e) => {
            const href = a.getAttribute("href");
            if (!href || href === "#") return;
            const el = document.querySelector(href);
            if (!el) return;
            e.preventDefault();
            el.scrollIntoView({ behavior: "smooth", block: "start" });
          });
        });

        // Scroll top link
        document.querySelectorAll("[data-scroll-top]").forEach((a) => {
          a.addEventListener("click", (e) => {
            e.preventDefault();
            window.scrollTo({ top: 0, behavior: "smooth" });
          });
        });

        // Spotlight Effect on glass cards
        document.addEventListener("mousemove", (e) => {
          document.querySelectorAll(".glass-card").forEach((card) => {
            const rect = card.getBoundingClientRect();
            card.style.setProperty("--mouse-x", `${e.clientX - rect.left}px`);
            card.style.setProperty("--mouse-y", `${e.clientY - rect.top}px`);
          });
        });

        // Entrance Animation (Intersection Observer)
        const observer = new IntersectionObserver(
          (entries) => {
            entries.forEach((entry) => {
              if (entry.isIntersecting) {
                entry.target.classList.add("reveal-visible");
                observer.unobserve(entry.target);
              }
            });
          },
          {
            threshold: 0.05,
            rootMargin: "0px 0px -40px 0px",
          },
        );

        document.querySelectorAll(".reveal-hidden").forEach((el) => {
          // Reset for animation — remove the safety reveal
          el.classList.remove("reveal-visible");
          observer.observe(el);
        });

        // Header shadow on scroll
        window.addEventListener("scroll", function () {
          var header = document.querySelector(".site-header");
          if (header) {
            if (window.scrollY > 10) header.classList.add("scrolled");
            else header.classList.remove("scrolled");
          }

          // Back to top button
          var backToTop = document.getElementById("backToTop");
          if (backToTop) {
            if (window.scrollY > 600) backToTop.classList.add("visible");
            else backToTop.classList.remove("visible");
          }
        });

        // Back to top click
        var backToTopBtn = document.getElementById("backToTop");
        if (backToTopBtn) {
          backToTopBtn.addEventListener("click", function () {
            window.scrollTo({ top: 0, behavior: "smooth" });
          });
        }

        // Count-up animation for stats
        function animateCountUp(el) {
          var target = parseInt(el.getAttribute("data-count"), 10);
          var unit = el.querySelector(".stat-unit");
          var unitText = unit ? unit.textContent : "";
          var duration = 2000;
          var start = 0;
          var startTime = null;

          function step(timestamp) {
            if (!startTime) startTime = timestamp;
            var progress = Math.min((timestamp - startTime) / duration, 1);
            var eased = 1 - Math.pow(1 - progress, 3); // easeOutCubic
            var current = Math.round(eased * target);
            el.textContent = current;
            if (unit) {
              el.appendChild(document.createElement("span"));
              el.lastChild.className = "stat-unit";
              el.lastChild.textContent = unitText;
            }
            if (progress < 1) requestAnimationFrame(step);
          }
          requestAnimationFrame(step);
        }

        var statsObserver = new IntersectionObserver(function (entries) {
          entries.forEach(function (entry) {
            if (entry.isIntersecting) {
              var nums = entry.target.querySelectorAll("[data-count]");
              nums.forEach(animateCountUp);
              statsObserver.unobserve(entry.target);
            }
          });
        }, { threshold: 0.3 });

        var statsSection = document.getElementById("stats");
        if (statsSection) statsObserver.observe(statsSection);

        // News feed
        fetch("./news.json")
          .then(function (r) {
            return r.ok ? r.json() : null;
          })
          .catch(function () {
            return null;
          })
          .then(function (data) {
            var list = document.getElementById("newsList");
            var none = document.getElementById("newsNone");
            if (!list) return;
            if (!data || !data.items || data.items.length === 0) {
              if (none) none.style.display = "block";
              return;
            }
            data.items.slice(0, 5).forEach(function (item) {
              var div = document.createElement("div");
              div.className = "flex items-center gap-3 py-2";
              div.style.borderBottom = "1px solid rgba(255,255,255,0.06)";
              div.innerHTML =
                (item.date
                  ? '<span class="font-mono text-xs text-slate-500 flex-shrink-0">' +
                  item.date +
                  "</span>"
                  : "") +
                '<span class="text-slate-400">' +
                (item.text || "") +
                "</span>";
              list.appendChild(div);
            });
          });

      } catch (e) {
        // ここで落ちても「真っ白」だけは避ける
        try {
          document.querySelectorAll(".reveal-hidden").forEach(function (el) {
            el.classList.add("reveal-visible");
          });
        } catch (_) { }
        try { console.warn(e); } catch (_) { }
      }
    })();

  </script>
  <script src="./assets/sakura.js"></script>
</body>

</html>